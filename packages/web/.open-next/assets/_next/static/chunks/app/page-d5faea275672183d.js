(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1741:function(e,t,s){Promise.resolve().then(s.bind(s,4964))},6338:function(e,t,s){"use strict";s.d(t,{Z:function(){return p}});var n=s(4618),r=s(7024),o=s(3911),c=s.n(o),a=s(8244),i=s.n(a),l=s(5041),u=function(e){let{href:t,children:s,onClick:r}=e,o=(0,l.usePathname)();return(0,n.jsx)("li",{className:"text-l p-2  text-center",children:(0,n.jsx)(c(),{className:" hover:text-slate-300 text-white ".concat(o===t?"font-bold":""),href:t,onClick:r,children:s})})},d=function(e){let{href:t,children:s,onClick:r}=e,o=(0,l.usePathname)();return(0,n.jsx)(c(),{className:" ".concat(o===t?"font-bold":""),href:t,onClick:r,children:(0,n.jsx)("li",{className:"cursor-pointer text-xl px-6 text-center py-5 hover:bg-white md:hover:bg-transparent hover:text-black",children:s})})},h=s(8976),x=s(4540);function f(){let[e,t]=(0,r.useState)(!0),s=(0,x.useSession)(),{authLoading:o,setAuthLoading:a}=(0,h.useAuth)();return(0,n.jsx)("div",{className:"container flex items-center justify-center p-1",children:"authenticated"===s.status?(0,n.jsx)("button",{onClick:()=>{console.log(s),(0,x.signOut)()},className:"bg-red-500 rounded py-1 px-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Log Out"}):(0,n.jsx)(n.Fragment,{children:"loading"===s.status?(0,n.jsx)("div",{className:"bg-slate-400 rounded py-4 px-8",children:" "}):(0,n.jsxs)("div",{className:"mt-1",children:[(0,n.jsx)(c(),{href:"/signup",children:(0,n.jsx)("span",{className:"bg-green-500 m-2 rounded py-1 px-2",children:"Sign Up"})}),(0,n.jsx)(c(),{href:"/auth/signin",children:(0,n.jsx)("span",{className:"bg-green-500 m-2 rounded py-1 px-2",children:"Log In"})})]})})})}let m=[{title:"RouteTest",path:"/RouteTest"},{title:"Home",path:"/"},{title:"About",path:"/about"},{title:"Profile",path:"/profile"},{title:"Uploads",path:"/uploads"},{title:"Note",path:"/note"},{title:"Settings",path:"/settings"}];var p=function(){let[e,t]=(0,r.useState)(!1),s=()=>{!0===e?(t(!e),document.body.style.overflow="unset"):(t(!e),document.body.style.overflow="hidden")},o=()=>{console.log("resize"),t(!1),document.body.style.overflow="unset"};return(0,r.useEffect)(()=>(window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}),[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("nav",{className:"w-full bg-gray-500 px-5 text-white ",children:[(0,n.jsxs)("div",{className:"flex justify-between md:py-5 md:flex md:justify-around md:align-middle ",children:[(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsx)(c(),{href:"/",children:(0,n.jsx)("h2",{className:"text-2xl font-bold md:5pl:5 py-4 md:py-0",children:"Next SST Starter"})})}),(0,n.jsx)("div",{className:"md:hidden py-4",children:(0,n.jsx)("button",{className:"py-3 rounded-md",onClick:()=>s(),children:e?(0,n.jsx)("div",{children:(0,n.jsx)(i(),{src:"/cross.svg",width:25,height:25,alt:"close",className:"invert"})}):(0,n.jsx)(i(),{src:"/menu.svg",width:25,height:25,alt:"menu",className:"invert"})})}),(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsxs)("ul",{className:"flex",children:[m.map((e,t)=>(0,n.jsx)(u,{href:e.path,onClick:o,children:e.title},t)),(0,n.jsx)("li",{children:(0,n.jsx)(f,{})})]})})]}),!0===e?(0,n.jsx)("div",{className:" md block ".concat(e?"block":"hidden"),children:(0,n.jsxs)("ul",{className:"md:h-auto md:flex mt-8 h-screen",children:[m.map((e,t)=>(0,n.jsx)(d,{href:e.path,onClick:o,children:e.title},t)),(0,n.jsx)("li",{children:(0,n.jsx)(f,{})})]})}):null]})})}},8976:function(e,t,s){"use strict";s.r(t),s.d(t,{dynamic:function(){return c},useAuth:function(){return i}});var n=s(4618),r=s(7024),o=s(4540);let c="force-dynamic",a=(0,r.createContext)(void 0);function i(){let e=(0,r.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}t.default=e=>{let{children:t}=e,[s,c]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!0),[u,d]=(0,r.useState)(!1),[h,x]=(0,r.useState)("");return(0,n.jsx)(a.Provider,{value:{isLoggedIn:s,setIsLoggedIn:c,authLoading:i,setAuthLoading:l,authStatus:u,setAuthStatus:d,status:h,setStatus:x},children:(0,n.jsx)(o.SessionProvider,{children:t})})}},5168:function(e,t,s){"use strict";function n(){if(void 0===window.location)return null;let e=new URL("http://localhost:3000"),t=e.protocol+"//",s=e.hostname,n=e.port?":".concat(e.port):"",r=window.location.protocol+"//",o=window.location.hostname,c=window.location.port?":".concat(window.location.port):"",a="localhost"===o?t:r,i="localhost"===o?s:o,l=""===c&&"localhost"!==o?"":c||n;return"".concat(a).concat(i).concat(l)}s.d(t,{$:function(){return n}})},1756:function(e,t){"use strict";t.Z=e=>{throw console.error("An error occurred:",e),Error("An error occurred.")}},9306:function(e,t,s){"use strict";s.d(t,{F9:function(){return i},O8:function(){return l},ag:function(){return a}});var n=s(3132),r=s.n(n),o=s(1756),c=s(5168);async function a(e){let{path:t}=e,s=(0,c.$)();return r().get("".concat(s,"/api/tunnel/").concat(t),{}).then(e=>{if(200===e.status)return console.log("get returned response",e),{data:e.data.response,status:e.status};throw(0,o.Z)({message:e.statusText}),Error(e.statusText)}).catch(e=>{throw(0,o.Z)({error:e}),e})}async function i(e){let{path:t,data:s,additionalHeaders:n={}}=e,a=(0,c.$)();return r().post("".concat(a,"/api/tunnel/").concat(t),s,{}).then(e=>{if(200===e.status)return console.log("post returned response",e),{data:e.data.response,status:e.status};throw(0,o.Z)({message:e.statusText}),Error(e.statusText)}).catch(e=>{throw(0,o.Z)({error:e}),e})}async function l(e){let{path:t}=e,s=(0,c.$)();return r().delete("".concat(s,"/api/tunnel/").concat(t)).then(e=>{if(200===e.status)return{data:e.data.response,status:e.status};throw(0,o.Z)({message:e.statusText}),Error(e.statusText)}).catch(e=>{throw(0,o.Z)({error:e}),e})}},4964:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(4618),r=s(7024),o=s(6338),c=s(4540),a=s(9306),i=s(5168);function l(){let[e,t]=r.useState(""),[s,o]=r.useState(""),[l,u]=r.useState(""),[d,h]=r.useState(""),[x,f]=r.useState(""),m=(0,c.useSession)();return(0,r.useEffect)(()=>{var e;async function s(){(0,a.ag)({path:"private"}).then(e=>{o(e.data)}).catch(e=>{console.log(e)})}async function n(){(0,a.ag)({path:"presigned"}).then(e=>{console.log(e.data.key),f(e.data.user)}).catch(e=>{console.log(e)})}console.log("siteurl:",(0,i.$)()),async function(){(0,a.ag)({path:"public"}).then(e=>{t(e.data)}).catch(e=>{console.log(e)})}(),null===(e=m.data?.user)||void 0===e||e.token,(null==m?void 0:m.status)==="authenticated"&&(s(),n())},[m]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsxs)("p",{children:["Public API Backend: ",e]})})," ",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{children:["Public API with JWT: ",s]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{children:["Proxy API with JWT: ",l]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{children:["Proxy API S3 presigned Url with JWT: ",d]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{children:["Public API S3 presigned URL with JWT: ",x]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})}var u=function(){let{data:e,status:t}=(0,c.useSession)();return(0,r.useEffect)(()=>{console.log("session",e,"status",t)},[e,t]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(o.Z,{}),(0,n.jsx)("h1",{className:"text-4xl font-bold",children:"Welcome to My Website"}),(0,n.jsx)("p",{className:"text-lg mt-4",children:"Here are some standard API calls"}),(0,n.jsx)(l,{})]})})}}},function(e){e.O(0,[540,911,132,442,89,676,744],function(){return e(e.s=1741)}),_N_E=e.O()}]);